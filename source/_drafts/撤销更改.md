---
title: 撤销更改
tags:
  - Git
categories:
  - Git相关
---

### 前言


### 使用git commit --amend

更改最后一个 commit
你已经使用 git commit 命令提交了大量的 commit。现在，借助 --amend 选项，你可以更改最近的 commit。

$ git commit --amend
如果你的工作目录没有内容（也就是仓库中没有任何未 commit 的更改），那么运行 git commit --amend 将使你能够重新提供 commit 消息。代码编辑器将打开，并显示原始 commit 消息。只需纠正拼错的单词或重新表述即可！然后保存文件并关闭编辑器，以便采用新的 commit 消息。
向 commit 中添加忘记的文件
此外，git commit --amend 使你能够包含忘记包含的文件（或文件更改）。假设你更新了整个网站的导航链接颜色。commit 了该更改，并以为完事了。但是后来发现深藏在页面上的一个特殊导航链接没有新的颜色。你可以执行新的 commit 并更新该链接的颜色，但是这样就会出现两个 commit 执行完全相同的任务（更改链接颜色）。

相反，你可以修改最后一个 commit（更新所有其他链接颜色的 commit）以包含这个忘记的链接。要包含忘记的链接，只需：

编辑文件
保存文件
暂存文件
运行 git commit --amend
你对必要的 CSS 和/或 HTML 文件作出了更改，以便修正被遗忘的链接样式，然后保存所有被修改的文件，并使用 git add 暂存所有被修改的文件（就像要提交新的 commit 那样！），但是你可以运行 git commit --amend 来更新最近的 commit，而不是创建新的 commit。


### 总结

git commit --amend 

- 命令可以修改最后一次提交中的内容加东西，加文件，
- 可以修改提交消息；


### 还原操作 git revert

当你告诉 git 还原（revert） 具体的 commit 时，git 会执行和 commit 中的更改完全相反的更改。我们详细讲解下。假设 commit A 添加了一个字符，如果 git 还原 commit A，那么 git 将创建一个新的 commit，并删掉该字符。如果删掉了一个字符，那么还原该 commit 将把该内容添加回来！

上节课最后讲解了合并冲突，并通过将标题设为 Adventurous Quest 解决了该冲突。假设现在仓库中有个 commit 将标题改为 Quests & Crusades。


### git reset 

- `--mixed`(默认不指定任何选项)移动到工作目录，不会暂存我们的文件，工作内容与原来相同，但是SHA不同，因为时间戳不同
- `--soft` 移动到暂存区，这些改动仍然存在，而且已经暂存好了。
- `--hard` 删除 会删除对应所有的提交的内容

### 最后

站在巨人的肩膀上，才能看的更远~
