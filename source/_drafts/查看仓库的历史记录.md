---
title: 查看仓库的历史记录
tags:
  - Git
categories:
  - Git相关
---

### 前言

Git会自动记录，创建提交时的时期和所作的内容更改，所以你需要做的就是为提交提供详细的标题或说明。当然我们在每次提交的时候，尽量详细的说明每次提交的内容。这样我们可以很容易的回顾整个项目，查看它是如何发展的。本篇文章不会实际的讲解提交，而是先让大家先习惯有这个概念，我们在平时开发项目时，应该经常提交，并提供详细的提交说明。但是经常的频率又是多少呢？怎样提交才算是一个好的提交呢？应该在提交中包含多少文件或者多少行代码呢？想要知道什么是好的提交，最好的办法就是查看现有的提交。我们使用`git log`和`git show`来查看仓库的历史记录。

- git log: 查看现有的提交信息
- git show:可以显示给定提交的信息。

对于这个命令，我们需要向其提供提交ID,也称为`SHA`,该命令就会显示有关这以提交的信息。

#### git log 命令

要回答这些问题，要回答这些问题，就要用到 git log 命令！与其逐条解释它的所有作用，不如直接体验一下吧！请在终端运行 git log 命令

```bash
git log
```

#### 了解日志内容

如果你不习惯在命令行上使用分页器，那么 less(英) 用起来会比较奇怪。以下是一些实用技巧：

默认情况下，该命令会显示仓库中每个 commit 的：

- SHA - git log 将显示每个 commit 的完整 SHA。每个 SHA 都是唯一的，因此，我不需要查看整个 SHA。只需知道前 6-8 个字符即可。如果我们能只显示 SHA 的前 5 个左右的字符，是不是会节省一些空间？
- 作者 - git log 输出结果显示了每个 commit 的作者！其他仓库可能有多个人协作，因此情况可能不同，但是对于此仓库，只有一个人提交了所有的 commit，因此所有 commit 的作者是一样的。我们需要查看每个 commit 的作者吗？如果我们想隐藏这一信息呢？
- 日期 - 默认情况下，git log 将显示每个 commit 的日期。但是我们真的关心 commit 的日期吗？知道日期有时会很重要，但是每次都知道日期并不十分重要，在很多情况下都可以忽略。能否隐藏该信息，以便节省空间？
- commit 消息 - 这是 commit 消息最重要的部分…我们通常都希望看到此信息

如下图所示：

```bash
commit 61c15fb30ce5df0c393617bc91519d365bdeaa01
Author: AndyJennifer <1225868370@qq.com>
Date:   Fri Jun 21 00:00:52 2019 +0800

    添加了线程中断文章，修改了draft模板
```

#### git log命令行日志浏览快捷键

但是上面的日志并没有显示完全，因为在界面的末尾有个冒号：表明还可以显示更多的输出行。Git使用`Less`程序作为其分页器，如果你不熟悉less或分页器也没有问题。分页器用于翻页浏览内容。下面我们看看该分页器的使用。

>要向下滚动，按下

- `j` 或 `↓` 一次向下移动一行
- `d` 按照一半的屏幕幅面移动
- `f` 按照整个屏幕幅面移动

>要向上滚动，按上

- `k` 或 `↑` 一次向上移动一行
- `u` 按照一半的屏幕幅面移动
- `b` 按照整个屏幕幅面移动

>当冒号变为单词END时，表示浏览完毕，那么我们可以按下 `q` 可以离开分页器


### 更改 git log 显示信息的方式

#### git log --oneline

```bash
5f00f5a 添加了线程的相关文章，准备发布
b234bcb 重新修改了博客
ef24ca9 完善了线程间通信的文章
637e315 添加了Dialog为什么会失效的原因
f1e4708 添加了dialog相关博客
af04712 修改了博客
fd4c68a 添加了ReentrantLock的使用例子
5a63008 完善了博客，并修改了博客中的错别字
a6c9b5d 修改了线程相关博客
00c2e79 修改了线程通信博客
46bb163 添加了博客中join的例子
d2dc2e8 添加了线程通信的博客
```

此命令：

- 每行显示一个 commit
- 显示 commit 的 SHA 的前 7 个字符
- 显示 commit 的消息
  
### 查看修改后的文件

git log --stat 小结
总结下，--stat 选项用于更改 git log 显示信息的方式：

$ git log --stat
此命令会：

显示被修改的文件
显示添加/删除的行数
显示一个摘要，其中包含修改/删除的总文件数和总行数

### 查看文件更改

我们知道 git log 将显示仓库中的 commit，如果添加 --stat 选项，则可以看出修改了哪些文件以及添加/删除了多少行代码。如果能查看到底进行了哪些更改，是不是更棒？

如果这不是版本控制系统的最精彩部分，那想不出还有什么更精彩的地方了！能够查看到底对文件作出了哪些更改非常重要！这使得我们能够得出结论 “这个 commit 向该按钮添加了 5 像素的圆角！”。

例如，在博客项目中，commit a3dc99a 具有消息"center content on page"并通过添加 5 行内容修改了 CSS 文件。到底添加了哪 5 行？如何找出这 5 行？

```bash
git log - p
```

这里要讲一个例子：

```
我们通过上述图片快速总结下 git log -p 的输出：

🔵 - 正在显示的文件
🔶 - 文件第一版的哈希值和第二版的哈希值
通常不重要，因此可以忽略
❤️ - 文件的旧版本和当前版本
🔍 - 添加的行所在的位置以及添加了多少行
-15,83 表示旧版本（用 - 表示）从第 15 行开始，显示了 83 行
+15,85 表示当前版本（用 + 表示）从第 15 行开始，现在变成了 85 行...这 85 行显示在下方
✏️ - 在 commit 中实际进行的更改
用红色标示并以减号 (-) 开头的行是位于文件原始版本中，但是被 commit 删除的行
用绿色标示并以加号 (+) 开头的行是 commit 新加的行
```

[Git-基础-查看提交历史](https://git-scm.com/book/zh/v2/Git-基础-查看提交历史)

### 查看特定的commit
太多滚动操作
上一部分的最后几个练习需要在补丁输出中不断向下滚动，以便找到正确的 commit 并查看其信息。如果能显示特定 commit 的详情，而不用关心仓库中的所有其他内容，是不是很棒？

实际上有两种实现方式！

向 git log 提供你要查看的 commit 的 SHA
使用新的 git show 命令
它们都很简单，我们先学习 git log 方式，然后再学习 git show。
你已经知道如何使用以下命令输出信息：

git log
git log --oneline
git log --stat
git log -p
但是你是否知道，可以向所有这些命令提供 commit 的 SHA 作为最后一个参数？例如：

$ git log -p fdf5493
通过提供 SHA，git log -p 命令将从这条 commit 开始！无需滚动并逐条查阅！注意，它还会显示在所提供的 SHA 之前提交的所有 commit 信息。
新命令：git show
另一个显示特定 commit 的命令是 git show：

$ git show
运行上述示例命令将仅显示最近的 commit。通常，将 SHA 作为最后一个参数提供给命令：

$ git show fdf5493
git show 的作用是？
git show 命令将仅显示一个 commit。因此，如果你看不到任何其他 commit，不要惊慌。它只显示一个 commit。git show 命令的输出和 git log -p 命令的完全一样。因此默认情况下，git show 会显示：

- commit
- 作者
- 日期
- commit 消息
- 补丁信息
- 但是，git show 可以与我们了解过的大部分其他选项一起使用：

--stat - 显示更改了多少文件，以及添加/删除的行数
-p 或 --patch - 显示默认补丁信息，但是如果使用了 --stat，将不显示补丁信息，因此传入 -p 以再次添加该信息
-w - 忽略空格变化

### 最后

站在巨人的肩膀上，才能看的更远~
